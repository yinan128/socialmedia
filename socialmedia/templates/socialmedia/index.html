<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social</title>
    {% load static %}
    <!-- ICONSCOUT CDN -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.6/css/unicons.css">
    <!-- STYLESHEET -->
    <link rel="stylesheet" href="{% static 'socialmedia/style.css' %}" type="text/css">
    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
    <script src="{% static 'socialmedia/index.js' %}?v={% now 'U' %}" type="text/javascript"></script>
    <script src="{% static 'socialmedia/ckeditor.js' %}"></script>
    <script src="{% static 'socialmedia/plotly-2.4.2.min.js' %}"></script>
    <script src="{% static 'socialmedia/luxon.min.js' %}"></script>
    <script src="{% static 'socialmedia/echarts.min.js' %}"></script>
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js"></script>; -->
</head>

<body>
    <nav>
        <div class="container">
            <h2 class="log">
                Social
            </h2>
            <div class="create">
                <div class="profile-photo">
                    <img src="{{picture}}">
                </div>
                <div>
                    <a href="{% url 'account_logout' %}">logout</a>
                </div>
            </div>
        </div>
    </nav>

    <!------------------------- MAIN -------------------------->
    <main>
        <div class="container">
            <!--======================== LEFT ==========================-->
            <div class="left">
                <a class="profile">
                    <div class="profile-photo">
                        <img src="{{picture}}">
                    </div>
                    <div class="handle">
                        <h4>{{first_name}} {{last_name}}</h4>
                        <p class="text-muted">
                            @{{username}}
                        </p>
                    </div>
                </a>

                <!-------------------- SIDEBAR ------------------------->
                <div class="sidebar">
                    <a class="menu-item active" onclick="switchToGlobalChannel()" id="globalChannel">
                        <span><i class="uil uil-compass"></i></span><h3>Global Channel</h3>
                    </a>
                    
                    <a class="menu-item" onclick="switchToFollowChannel()" id="followChannel">
                        <span><i class="uil uil-home"></i></span><h3>Follow Channel</h3>
                    </a>
                    <a class="menu-item" onclick="switchToLocalStream()" id="localStream">
                        <span><i class="uil uil-home"></i></span><h3>Local Channel</h3>
                    </a>
                    <a class="menu-item" onclick="switchToLocalNews()" id="localNews">
                        <span><i class="uil uil-home"></i></span><h3>Local News</h3>
                    </a>
                    <a class="menu-item" onclick="switchToMapit()" id="mapitChannel">
                        <span><i class="uil uil-compass"></i></span><h3>Map it</h3>
                    </a>
                    
                    <a class="menu-item" id="statistics" onclick="switchToStat()">
                        <span><i class="uil uil-chart-line"></i></span><h3>Analytics</h3>
                    </a>                      
                </div>
                <!------------------- END OF SIDEBAR -------------------->
            </div>
            <!------------------- END OF LEFT -------------------->



            <!--======================== MIDDLE ==========================-->
            <div class="middle" id="middlePart">
                <div class="create-post" id="create-post">

                    <div id="editor">
                    </div>
                    <script>
                        let editor
                        ClassicEditor
                            .create( document.querySelector( '#editor' ))
                            .then( newEditor => {
                                editor = newEditor;
                            } )
                            .catch( error => {
                                console.error( error );
                            } );
                    </script>

                    <input type="submit" value="Post" class="btn btn-primary btn-floatright" onclick="postAction()">

{#                    <div class="profile-photo">#}
{#                        <img src="./images/profile-1.jpg">#}
{#                    </div>#}
{#                    <input type="text" placeholder="What's on your mind?" id="create-post">#}
{#                    <input type="submit" value="Post" class="btn btn-primary" onclick="getLocation()">#}
                </div>

                <!------------------- Visibility Overlay --------------------->
                <div id="visibility-overlay" class="center-overlay">
                    <form id="visibility-form" method="POST" class="overlay-form" action="{% url 'visibility' %}">
                        Set Post Visibility:<br>
                        <input type="hidden" name="post_id" id="post_vis_id" value="0">

                        <input type="radio" id="public_vis" name="post_vis_option" onclick="remove_groups_options()" value="public" checked>
                        <label for="public_vis">Public</label><br>
                        <input type="radio" id="private_vis" name="post_vis_option" value="private" onclick="remove_groups_options()">
                        <label for="private_vis">Private</label><br>
                        <input type="radio" id="group_vis" name="post_vis_option" onclick="update_groups_options()" value="group">
                        <label for="group_vis">Group Invisible</label><br>

                        <div id="select-groups">
                        </div>
                        <input type="submit" value="Confirm" onsubmit="edit_post_vis()"> 
                        {% csrf_token %}
                    </form>
                </div>
                <!------------------- FEEDS --------------------->
                <div class="feeds" id="allFeeds">
                </div>
                <!------------------------------- END OF FEEDS ------------------------------------>
            </div>
            <!--======================== END OF MIDDLE ==========================-->


            <!--======================== RIGHT ==========================-->
            <div class="right">
                <div class="messages">
                    <div class="heading">
                        <h4>Connections</h4>
                    </div>
                    
                    <!------------ MESSAGES CATEGORY -------------->
                    <div class="category">
                        <h6 id="following-tab" class="active">Following</h6>
                        <h6 id="group-tab">My Group</h6>
                    </div>
                    <div id="group-content">
                        <div class="message hide">
                            <div class="message-body">
                                <h5>Group Dummy</h5>
                            </div>
                            <div class="group-edit-div">
                                <button class="group-edit-btn">Edit</button> 
                            </div>
                        </div>
                        <div id="add-group" class="hide">
                            <label class="btn btn-primary" onclick="get_users_list()">Add Group</label>
                        </div>
                        <div id="add-group-overlay" class="center-overlay">
                            <form id="add-group-form" method="POST" class="overlay-form" action="{% url 'addGroup' %}">
                                <h3>Add Users to Group</h3>
                                <input name='group-name' type="text" id="group-name" placeholder="Enter your group name here">
                                <br>
                                <div id="form-details"></div>
                                {% csrf_token %}
                            </form>
                        </div>
                        <div id="edit-group-overlay" class="center-overlay">
                            <form id="edit-group-form" class="overlay-form" method="POST" action="{% url 'editGroup' %}">
                                
                            </form>
                        </div>
                    </div>
                    <!------------ MESSAGE -------------->
                    <!----- MESSAGE ----->
                    <div id="messages">
                    </div>
                    
                </div>
                <!------------ END OF MESSAGES -------------->
                </div>
            </div>
            <!--====================== END OF RIGHT ==========================-->
        </div>
    </main>

 <!--================================================ THEME CUSTOMIZATION =============================================-->
 <div class="customize-theme">
    <div class="card">
        <h2>Customize your view</h2>
        <p class="text-muted">Manage your font size, color, and background.</p>

        <!------------ FONT SIZES ------------->
        <div class="font-size">
            <h4>Font Size</h4>
            <div>
                <h6>Aa</h6>
            <div class="choose-size">
                <span class="font-size-1"></span>
                <span class="font-size-2"></span>
                <span class="font-size-3"></span>
                <span class="font-size-4"></span>
                <span class="font-size-5"></span>
            </div>
            <h3>Aa</h3>
            </div>
        </div>

        <!------------ PRIMARY COLORS ------------->
        <div class="color">
            <h4>Color</h4>
            <div class="choose-color">
            <span class="color-1 active"></span>
            <span class="color-2"></span>
            <span class="color-3"></span>
            <span class="color-4"></span>
            <span class="color-5"></span>
            </div>
        </div>

        <!---------- BACKGROUND COLORS ------------>
        <div class="background">
            <h4>Background</h4>
            <div class="choose-bg">
                <div class="bg-1 active">
                    <span></span>
                    <h5 for="bg-1">Light</h5>
                </div>
                <div class="bg-2">
                    <span></span>
                    <h5>Dim</h5>
                </div>
                <div class="bg-3">
                    <span></span>
                    <h5 for="bg-3">Lights Out</h5>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- <script src="socialmedia/index.js"></script> -->
<script>
    //Call getList() as soon as page is finished loading to display the to do list

    window.onload = onloadEvents;
    //... also call getList every 3 seconds hereafter to update the list
    window.setInterval(refresh, 3000);
    //window.setInterval(getFollow, 3000);

</script>

</body>
</html>