<!--
    THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=pie-roseType
-->
<!DOCTYPE html>
<html style="height: 100%">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Social</title>
        {% load static %}
        <!-- ICONSCOUT CDN -->
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.6/css/unicons.css">
        <!-- STYLESHEET -->
        <link rel="stylesheet" href="{% static 'socialmedia/style.css' %}" type="text/css">
        <!-- JS -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"
                integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
                crossorigin="anonymous"></script>
        <script src="{% static 'socialmedia/index.js' %}?v={% now 'U' %}" type="text/javascript"></script>
        <script src="{% static 'socialmedia/ckeditor.js' %}"></script>
        <script src="{% static 'socialmedia/plotly-2.4.2.min.js' %}"></script>
        <script src="{% static 'socialmedia/luxon.min.js' %}"></script>
        <style>
          h3 {
            text-align: center;
          }
        </style>
    </head>
    <body style="height: 100%; margin: 0">
      <nav>
        <div class="container">
            <h2 class="log">
                Social
            </h2>
            <div class="search-bar">
                <i class="uil uil-search"></i>
                <input type="search" placeholder="Search for creators, inspirations, and projects">
            </div>
            <div class="create">
                <div class="profile-photo">
                    <img src="{{picture}}">
                </div>
                <div>
                    <a href="{% url 'account_logout' %}">logout</a>
                </div>
            </div>
        </div>
      </nav>
      <main>
        <input type="hidden" id="stream" value="{{stream}}">
        <div class="container">
          <!--======================== LEFT ==========================-->
          <div class="left">
              <a class="profile">
                  <div class="profile-photo">
                      <img src="{{picture}}">
                  </div>
                  <div class="handle">
                      <h4>{{first_name}} {{last_name}}</h4>
                      <p class="text-muted">
                          @{{username}}
                      </p>
                  </div>
              </a>

              <!-------------------- SIDEBAR ------------------------->
              <div class="sidebar">
                <a class="menu-item" onclick="switchToGlobalChannel()" id="globalChannel">
                    <span><i class="uil uil-compass"></i></span><h3>Global Channel</h3>
                </a>
                <a class="menu-item" onclick="switchToLocalStream()" id="localStream">
                    <span><i class="uil uil-compass"></i></span><h3>Local Channel</h3>
                </a>
                
                <a class="menu-item" onclick="switchToLocalChannel()" id="localChannel">
                    <span><i class="uil uil-home"></i></span><h3>Local News</h3>
                </a>
                <a class="menu-item" onclick="switchToMapit()" id="mapitChannel">
                    <span><i class="uil uil-compass"></i></span><h3>Map it</h3>
                </a>
                    <!-------------------- END NOTIFICATION POPUP ---------------->
                </a>
                <a class="menu-item">
                    <span><i class="uil uil-bookmark"></i></span><h3>Bookmarks</h3>
                </a>
                <a class="menu-item active">
                    <span><i class="uil uil-chart-line"></i></span><h3>Analytics</h3>
                </a>
                <a class="menu-item">
                    <span><i class="uil uil-setting"></i></span><h3>Settings</h3>
                </a>                        
              </div>
          </div>
          <div class="middle" id="middlePart">
            <h3>SocialMedia GitHub Registerred vs. Google Registerred</h3>
            <div id="container" style="height: 80%"></div>
            <h3>8 Places where most of the posts come from</h3>
            <div id="container2" style="height: 80%"></div>
            <div id="container3" style="height: 80%"></div>
          </div>
        </div>
      </main>

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js"></script>
        <!-- Uncomment this line if you want to dataTool extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/extension/dataTool.min.js"></script>
        -->
        <!-- Uncomment this line if you want to use gl extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
        -->
        <!-- Uncomment this line if you want to echarts-stat extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
        -->
        <!-- Uncomment this line if you want to use map
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/map/js/china.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.2.2/map/js/world.js"></script>
        -->
        <!-- Uncomment these two lines if you want to use bmap extension
        <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=<Your Key Here>"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@{{version}}/dist/extension/bmap.min.js"></script>
        -->

        <script type="text/javascript">
          var dom = document.getElementById("container");
          var myChart = echarts.init(dom);
          var app = {};

          var option;

          var github_cnt = "{{users_dis.github}}";
          var google_cnt = "{{users_dis.google}}";

          option = {
            tooltip: {
              trigger: 'item'
            },
            legend: {
              top: '5%',
              left: 'center'
            },
            series: [
              {
                name: 'Access From',
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                itemStyle: {
                  borderRadius: 10,
                  borderColor: '#fff',
                  borderWidth: 2
                },
                label: {
                  show: false,
                  position: 'center'
                },
                emphasis: {
                  label: {
                    show: false,
                    fontSize: '18',
                    fontWeight: 'bold'
                  }
                },
                labelLine: {
                  show: false
                },
                data: [
                  { value: github_cnt, name: 'GitHub' },
                  { value: google_cnt, name: 'Google' },
                ]
              }
            ]
          };

          if (option && typeof option === 'object') {
              myChart.setOption(option);
          }
        </script>

        <script type="text/javascript">
          var dom = document.getElementById("container2");
          var myChart = echarts.init(dom);
          var app = {};

          var option;

          var data = "{{posts_dis}}";
          data = JSON.parse(data.replace(/&quot;/g,'"'));
          console.log(data)

          option = {
            tooltip: {
              trigger: 'item'
            },
            legend: {
              top: '5%',
              left: 'center'
            },
            series: [
              {
                name: 'Access From',
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                itemStyle: {
                  borderRadius: 10,
                  borderColor: '#fff',
                  borderWidth: 2
                },
                label: {
                  show: false,
                  position: 'center'
                },
                emphasis: {
                  label: {
                    show: false,
                    fontSize: '18',
                    fontWeight: 'bold'
                  }
                },
                labelLine: {
                  show: false
                },
                data: data
              }
            ]
          };

          if (option && typeof option === 'object') {
              myChart.setOption(option);
          }
        </script>
        <script>
          var chartDom = document.getElementById('container3');
          var myChart = echarts.init(chartDom);
          var option;

          var date = "{{date|safe}}";
          var num = "{{num|safe}}";
          date = JSON.parse(date)
          console.log(date)
          num = JSON.parse(num)
          option = {
            xAxis: {
              type: 'category',
              data: date
            },
            yAxis: {
              type: 'value'
            },
            series: [
              {
                data: num,
                type: 'line'
              }
            ]
          };

          option && myChart.setOption(option);
        </script>
    </body>
</html>
    